# os

## **프로세스와 스레드 차이**

프로세스는 메모리 상에서 실행중인 프로그램을 말하며, 스레드는 이 프로세스 안에서 실행되는 흐름 단위를 말한다.

프로세스마다 최소 하나의 스레드를 보유하고 있으며, 각각 별도의 주소공간을 독립적으로 할당받는다. (code, data, heap, stack)

스레드는 이중에 stack만 따로 할당받고 나머지 영역은 스레드끼리 서로 공유한다.

### **[요약]**

**프로세스** : 자신만의 고유 공간과 자원을 할당받아 사용

**스레드** : 다른 스레드와 공간과 자원을 공유하면서 사용

## **교착상태(DeadLock)가 무엇이며, 4가지 조건은?**

프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태를 말한다.

시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생하는 문제임

교착상태의 4가지 조건은 아래와 같다.

- 상호배제 : 프로세스들이 필요로 하는 자원에 대해 배타적 통제권을 요구함
- 점유대기 : 프로세스가 할당된 자원을 가진 상태에서 다른 자원 기다림
- 비선점 : 프로세스가 어떤 자원의 사용을 끝날 때까지 그 자원을 뺏을 수 없음
- 순환대기 : 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 갖고 있음

이 4가지 조건 중 하나라도 만족하지 않으면 교착상태는 발생하지 않음

(순환대기는 점유대기와 비선점을 모두 만족해야만 성립합. 따라서 4가지가 서로 독립적이진 않음)

## **뮤텍스, 세마포어가 뭔지, 차이점은?**

### **세마포어**

- 운영체제에서 공유 자원에 대한 접속을 제어하기 위해 사용되는 신호 공유자원에 접근할 수 있는 최대 허용치만큼만 동시에 사용자 접근 가능 스레드들은 리소스 접근 요청을 할 수 있고, 세마포어는 카운트가 하나씩 줄어들게 되며 리소스가 모두 사용중인 경우(카운트=0) 다음 작업은 대기를 하게 된다

### **뮤텍스**

- 상호배제, 제어되는 섹션에 하나의 스레드만 허용하기 때문에, 해당 섹션에 접근하려는 다른 스레드들을 강제적으로 막음으로써 첫번재 스레드가 해당 섹션을 빠져나올 때까지 기다리는 것 (대기열(큐) 구조라고 생각하면 됨)

### **차이점**

- 세마포어는 뮤텍스가 될 수 있지만, 뮤텍스는 세마포어가 될 수 없음
- 세마포어는 소유 불가능하지만, 뮤택스는 소유가 가능함
- 동기화의 개수가 다름

## **Context Switching이란?**

- 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업
- 한 프로세스의 문맥은 그 프로세스의 PCB에 기록됨

## **사용자 수준 스레드 vs 커널 수준 스레드 차이는?**

### **사용자 수준 스레드**

장점 : context switching이 없어서 커널 스레드보다 오버헤드가 적음 (스레드 전환 시 커널 스케줄러 호출할 필요가 없기 때문)

단점 : 프로세스 내의 한 스레드가 커널로 진입하는 순간, 나머지 스레드들도 전부 정지됨 (커널이 스레드의 존재를 알지 못하기 때문에)

### **커널 수준 스레드**

장점 : 사용자 수준 스레드보다 효율적임. 커널 스레드를 쓰면 멀티프로세서를 활용할 수 있기 때문이다. 사용자 스레드는 CPU가 아무리 많아도 커널 모드의 스케줄이 되지 않으므로, 각 CPU에 효율적으로 스레드 배당할 수가 없음

단점 : context switching이 발생함. 이 과정에서 프로세서 모드가 사용자 모드와 커널 모드 사이를 움직이기 때문에 많이 돌아다닐 수록 성능이 떨어지게 된다.

## 면접 질문 - 프로세스

- 교착상태의 해결법은 무엇인가요?
- 경쟁 상태란 무엇인가요?
- 프로세스 혹은 스레드의 동기화란 무엇인가요?
- 사용자 수준의 스레드와 커널 수준의 스레드의 차이는 무엇인가요?
- CPU 스케줄링이란 무엇인가요?
- CPU 스케줄링 방법에는 대표적으로 어떤 것들이 있나요?
- 동기와 비동기, 블로킹과 넌블로킹의 차이는 무엇인가요?

## 면접 질문 - 메모리

- 프로세스에 할당되는 메모리의 각 영역에 대해서 설명해 주세요.
- 메모리 구조의 순서가 어떻게 되는가? CPU에서 가까운 순으로 말해보시오.
- 페이지와 세그멘테이션에 대해서 설명해 보시오.
- 외부 단편화란? 내부 단편화란?
- First Fit, Best Fit, Worst Fit에 대해서 설명해 보시오.
- 페이지 교체 알고리즘 종류에는 어떤 것들이 있나요?
