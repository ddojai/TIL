# 15장 쿠버네티스 소개

## 쿠버네티스 개념 소개
- 컨테이너를 실행하는 서버 클러스터(물리 혹은 가상)를 하나의 커다란 논리 서버로 만드는 컨테이너 오케스트레이터
  - 쿠버네티스 API로 객체를 생성해 원하는 상태를 클러스터에 선언하면 쿠버네티스는 지정한 상태와 현재 상태를 지속적으로 비교
  - 차이를 감지하면 현재 상태가 지정한 상태와 일치하도록 조치
- 주요 목적 중 하나는 컨테이너를 배포 및 실행하면서 블루/그린 배포나 카나리아 배포 등의 기술을 사용해 무중단 롤링 업그레이드를 지원
  - 하나 혹은 다수의 컨테이너가 배치된 포드를 클러스터의 가용 노드에 스케줄링 할 수 있다.
  - 실행 중인 컨테이너의 상태를 모니터링 할 수 있도록 컨테이너가 라이브니스 프로브(liveness probe)를 구현한다고 가정
  - 라이브니스 프로브가 비정상 컨테이너를 보고하면 쿠버네티스는 해당 컨테이너를 다시 시작
  - 수평 오토스케일러(horizontal autoscaler)를 사용해 자동이나 수동으로 컨테이너를 스케일링
  - 메모리 및 CPU와 같은 클러스터의 가용 하드웨어 자원을 최적화 하려면 quota(할당량)을 사용해 컨테이너에 필요한 자원양을 지정
  - 컨테이너 그룹이 소비할 수 있는 자원 양에 대한 제한은 네임스페이스 수준에서 지정
  - 네임스페이스는 여러 팀이 쿠버네티스 클러스터를 공유하는 경우 매우 중요
- 다른 주요 목적은 실행 중인 포드와 컨테이너를 위한 서비스 검색을 제공
  - 쿠버네티스의 서비스 객체를 정의하면 요청을 가용 포드로 로드 밸런싱하고 서비스를 검색 가능
  - 서비스 객체를 쿠버네티스 클러스터 외부로 공개할 수도 있지만, 서비스 그룹으로 들어오는 외부 트래픽을 처리하는 데는 인그레스 객체가 더 적합
  - 컨테이너가 레디니스 프로브(readiness probe)를 구현하면 들어오는 요청을 수락할 준비가 도ㅒㅆ는지 쿠버네티스가 안다.
- 내부적으로 클러스터는 각 포드에 IP 주소를 할당하고 포드를 실행하는 노드와 관계 없이 다른 포드에 접근할 수 있게 하는 하나의 플랫 IP 네트워크(flat ip network)를 제공
  - 여러 네트워크 벤더를 지원하고자 쿠버네티스는 Container Network Interface 사양을 준수하는 네트워크 플러그인의 사용을 허용
  - 기본적으로 포드는 격리되어 있지 않으며, 들어오는 모든 요청을 수락
  - 네트워크 정책을 정의할 수 있는 CNI 플러그인을 사용하면 포드에 대한 접근을 제한 가능
  - 에를 들어, 동일한 네임스페이스에 있는 포드에서 오는 트래픽만 허용 가능
- 여러 팀이 하나의 쿠버네티스 클러스터에서 안전하게 작업할 수 있도록 역할 기반 접근 제어(Role-Based Access Control)를 적용 가능
  - 예를 들어, 관리자에게는 클러스터 수준의 리소스에 접근할 수 있는 권한 부여하고, 팀 구성원에게는 팀 소유의 네임스페이스에 생성된 리소스에만 접근할 수 있게 제한할 수 있다.
- 쿠버네티스는 확장성 있고 안전하며 가용성이 높고 탄력적인 컨테이너 실행 플랫폼을 제공

## 쿠버네티스 API 객체 소개
- 쿠버네티스는 여러 유형의 객체나 리소스를 관리할 때 사용하는 API를 정의
- node : 클러스터에 속한 가상 혹은 물리 서버를 의미
- pod : 포드는 쿠버네티스에 배포할 수 있는 컴포넌트의 최소 단위