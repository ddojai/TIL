# 2. 코틀린 기초

## 2.1 기본 요소: 함수와 변수

### 2.1.1 Hello, World!

- 함수를 최상위 수준으로 정의 가능하다. 꼭 클래스 안에 넣어야 할 필요는 없다.
- 배열도 일반적인 클래스와 마찬가지다. 자바와 달리 배열 처리를 위한 문법이 없다.
- 코틀린 표준 라이브러리는 여러 가지 표준 자바 라이브러리 함수를 간결하게 사용할 수 있게 감싼 래퍼를 제공한다.
  - System.out.println 대신 println이라고 쓴다.

### 2.1.2 함수

#### 문(statement)과 식(expression)의 구분
- 코틀린에서 if는 식이지 문이 아니다.
- 식은 값을 만들어 내며 다른 식의 하위 요소로 계산에 참여할 수 있는 반면 문은 자식을 둘러싸고 있는 가장 안쪽 블록의 최상위 요소로 존재하며 아무런 값을 만들어 내지 않음
- 자바에서는 모든 제어 구조가 문인 반면 코틀린에서는 루프를 제외한 대부분의 제어 구조가 식이다.
- 제어 구조를 다른 식으로 엮어낼 수 있으면 여러 일반적인 패턴을 아주 간결하게 표현할 수 있다.

#### 식이 본문인 함수
- 본문이 중괄호로 둘라싸인 함수를 블록이 본문인 함수라 함
- 등호와 식으로 이뤄진 함수를 식이 본문인 함수라 함
- 코틀린에서는 식이 본문인 함수가 자주 쓰인다.
- 식이 본문인 함수의 경우 굳이 사용자가 반환 타입을 적지 않아도 컴파일러가 함수 본문 식을 분석해서 식의 결과 타입을 함수 반환 타입으로 정해준다.
- 컴파일러가 타입을 분석해 프로그램 구성 요소의 타입을 정해주는 기능을 타입 추론(type inference)이라 부른다.
- 식이 본문인 함수의 반환 타입만 생략 가능
- 블록이 본문인 함수가 값을 반환한다면 반드시 반환 타입을 지정하고 return문을 사용해 반환 값을 명시

### 2.1.3 변수
- 코틀린에서는 타입 지정을 생략하는 경우가 흔하다.
- 타입으로 변수 선언을 시작하면 타입을 생략할 경우 식과 변수 선언을 구별할 수 없다.
- 코틀린에서는 키워드로 변수 선언을 시작하는 대신 변수 이름 뒤에 타입을 명시하거나 생략하게 허용한다.
- 식이 본문인 함수에서와 마찬가지로 타입을 지정하지 않으면 컴파일러가 초기화 식을 분석해서 초기화 식의 타입을 변수 타입으로 지정
- 부동소수점 상수를 사용한다면 변수 타입은 Double
- 초기화 식이 없다면 컴파일러가 타입을 추론할 수 없다. 그런 경우 타입을 반드시 지정해야 한다.

#### 변경 가능한 변수와 변경 불가능한 변수
- val(값을 뜻하는 value) - 변경 불가능한 참조. 자바로 치면 final 변수
- var(변수를 뜻하는 variable) - 변경 가능한 참조.
- 기본적으로는 모든 변수를 val 키워드를 사용해 불변 변수로 선언. 필요할 때에만 var로 변경
- 변경 불가능한 객체를 부수 효과가 없는 함수와 조합해 사용하면 코드가 함수형 코드에 가까워진다.
- val 변수는 블록을 실행할 때 정확히 한 번만 초기화. 하지만 어떤 블록이 실행될 때 오직 한 초기화 문장만 실행됨을 컴파일러가 확인할 수 있다면 조건에 따라 val 값을 다른 여러 값으로 초기화 가능.
- val 참조 자체는 불변일지라도 그 참조가 가리키는 객체의 내부 값은 변경될 수 있다
- var 키워드를 사용하면 변수의 값을 변경할 수 있지만 변수의 타입은 고정돼 바뀌지 않는다.
- 컴파일러는 변수 선언 시점의 초기화 식으로부터 변수의 타입을 추론하며, 변수 선언 이후 변수 재대입이 이뤄질 때는 이미 추론한 변수의 타입을 염두에 두고 대입문의 타입을 검사
- 어떤 타입의 변수에 다른 타입의 값을 저장하고 싶다면 변환 함수를 써서 값을 변수의 타입으로 변환하거나, 값을 변수에 대입할 수 있는 타입으로 강제 형 변환해야 한다.

### 2.1.4 더 쉽게 문자열 형식 지정: 문자열 템플릿
- 코틀린에서도 변수를 문자열 안에 사용할 수 있다. 문자열 리터럴의 필요한 곳에 변수를 넣되 변수 앞에 $를 추가해야 한다.
- 컴파일러는 각 식을 static으로 (컴파일 시점에) 검사하기 때문에 존재하지 않는 변수를 문자열 템플릿 안에서 사용하면 컴파일 오류가 발생.
- $ 문자를 문자열에 넣고 싶으면 \를 사용해 escape 시켜야 한다.
- 복잡한 식도 중괄호({})로 둘러싸서 문자열 템플릿 안에 넣을 수 있다.
- 중괄호로 둘러싼 식 안에서 큰 따옴표를 사용할 수도 있다.

#### 한글을 문자열 템플릿에서 사용할 경우 주의할 점
- 문자열 템플릿 안에서 변수 이름만 사용하는 경우라도 중괄호로 변수명을 감싸는 습관을 들이면 더 좋다.

## 2.2 클래스와 프로퍼티
- 코드가 없이 데이터만 저장하는 클래스를 값 객체(value object)라 부르며, 다양한 언어가 값 객체를 간결하게 기술할 수 있는 구문을 제공한다
- 코틀린의 기본 가시성은 public이므로 이런 경우 변경자를 생략해도 된다.

### 2.2.1 프로퍼티
- 클래스라는 개념의 목적은 데이터를 캠슐화하고 데이터를 다루는 코드를 한 주체 아래 가두는 것
- 자바에서는 필드와 접근자를 한데 묶어 property 라고 함.
- 코틀린은 프로퍼티를 언어 기본 기능으로 제공. 자바의 필드와 접그자 메소드를 완전히 대신한다.
- 프로퍼티를 선언할 때는 val이나 var를 사용. val 은 읽기 전용. var는 변경 가능.
- 코틀린에서 프로퍼티를 선언하는 방식은 프로퍼티와 관련 있는 접근자를 선언하는 것.
- 코틀린은 값을 저장하기 위한 비공개 필드와 그 필드에 값을 저장하기 위한 세터, 필드의 값을 읽기 위한 게터로 이뤄진 간단한 디폴트 접근자 구현을 제공.
- 이름이 is로 시작하는 프로퍼티의 게터에는 get이 붙지 않고 원래 이름을 그대로 사용하며, 세터에는 is를 set으로 바꾼 이름을 사용한다.
- 게터를 호출하는 대신 프로퍼티를 직접 사용도 가능. 변경 가능한 프로퍼티의 세터도 마찬가지로 동작.
- 대부분의 프로퍼티에는 값을 저장하기 위한 필드가 있다. 이를 프로퍼티를 뒷받침하는 필드(backing field)라고 부른다.
